<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Lathyflora Spray App</title>
  <link rel="icon" type="image/png" href="https://www.lathyflora.com/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2Fjiznfzry%2Fproduction%2F42e3db94edca8d3be3981c6b1155aeef1b527a09-476x476.png&w=256&q=75">
  <link rel="apple-touch-icon" href="https://www.lathyflora.com/_next/image?url=https%3A%2F%2Fcdn.sanity.io%2Fimages%2Fjiznfzry%2Fproduction%2F42e3db94edca8d3be3981c6b1155aeef1b527a09-476x476.png&w=256&q=75">
  <style>
    body{font-family:Arial;margin:0;height:100vh;display:flex;justify-content:center;align-items:center;background:#eef5f1}
    .card{background:#fff;padding:24px;border-radius:12px;box-shadow:0 4px 30px rgba(0,0,0,.08);width:360px}
    .links{display:grid;gap:10px;margin-top:12px}
    a{display:block;padding:10px 12px;border-radius:8px;background:#138a36;color:#fff;text-decoration:none}
    a:hover{background:#0f6d2d}
    .top{display:flex;justify-content:space-between;align-items:center}
    button{background:#444;color:#fff;border:0;border-radius:8px;padding:8px 10px;cursor:pointer}
  </style>
</head>
<body>
  <div class="card">
    <div class="top">
      <h3 style="margin:0">Lathyflora Spray App</h3>
      <button onclick="logout()">Logout</button>
    </div>
    <div id="roleBox" style="margin-top:6px;color:#555"></div>
    <div class="links" style="margin-top:16px">
      <a href="viewer.html">Viewer Dashboard</a>
      <a href="supervisor.html">Supervisor Dashboard</a>
      <a href="agronomist.html">Agronomist Dashboard</a>
      <a href="farmreport.html">Farm Report</a>
      <a href="login.html">Login</a>
      <a href="register.html">Create Account</a>
    </div>
  </div>
<script>
  async function logout(){
    await fetch('/logout',{method:'POST'});
    location.href='login.html';
  }
  (async ()=>{
    try{
      const r=await fetch('/check-session'); const d=await r.json();
      if(d.loggedIn) document.getElementById('roleBox').innerText = `Logged in as: ${d.role}`;
    }catch{}
  })();
</script>
</body>
</html>
